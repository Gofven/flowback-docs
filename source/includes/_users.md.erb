# User

## Register

```shell
curl "<%= config[:endpoint] %>/register" \
-H "Authorization: your_token_here" \
-d "username=flowback" \
-d "email=flowback@example.com"
```

This endpoint registers an user to the site. An activation email will be sent to the user containing the
`verification_code`, which will be needed for the [next step of the registration.](#verify-register)

### HTTP Request

`POST /register`

### Body Parameters

| Parameter           | Notes |
|---------------------|-------|
| `username` *string* |       |
| `email` *string*    |       |

## Verify Register

```shell
curl "<%= config[:endpoint] %>/register/verify" \
-H "Authorization: your_token_here" \
-d "verification_code=your_verification_code" \
-d "password=your_password"
```

This endpoint completes an user registration, and creates a password associated to the user.



### HTTP Request

`POST /register/verify`

### Body Parameters

| Parameter                    | Notes                                            |
|------------------------------|--------------------------------------------------|
| `verification_code` *string* | Can be obtained trough the `/register` endpoint. |
| `password` *string*          |                                                  |

<aside class="warning">Make sure that the user doesn't do any typing mistakes with the password by e.g.
requiring the user to type their password twice.</aside>

## List Users

```shell
curl "<%= config[:endpoint] %>/users" \
-H "Authorization: your_token_here"
```

> The above command returns JSON structured like this:

```json
{
  "data": [
    {
      "id": 1,
      "username": "flowback",
      "profile_image": "https://example.com/media/image.png"
    },
    ...
  ]
}
```

This endpoint gets a list of users.

### HTTP Request

`GET /users`

### URL Parameters

| Parameter                     | Notes |
|-------------------------------|-------|
| `username` *string, optional* |       |

## Get User

```shell
curl "<%= config[:endpoint] %>/user/<id>" \
-H "Authorization: your_token_here"
```

> The above command returns JSON structured like this:

```json
{
  "data": [
    {
      "id": 1,
      "email": "flowback@example.com",
      "username": "flowback",
      "profile_image": "https://example.com/media/image.png",
      "banner_image": "https://example.com/media/banner.png",
      "bio": "Hello world!",
      "website": "https://example.com/"
    }
  ]
}
```

This endpoint gets an user.

### HTTP Request

`GET /user`

### URL Parameters

| Parameter            | Notes                                   |
|----------------------|-----------------------------------------|
| `id` *int, optional* | Leave it blank to get the current user. |



## Update User

```shell
curl "<%= config[:endpoint] %>/user/update" \
-H "Authorization: your_token_here" \
-d "username=flowback" \
-F "profile_image=@profile_image.png" \
-F "banner_image=@banner_image.png" \
-d "bio=Welcome to my profile!"
-d "website=https://example.com/"
```

This endpoint updates an user.

### HTTP Request

`POST /user`

### Body Parameters

| Parameter                        | Notes |
|----------------------------------|-------|
| `username` *string, optional*    |       |
| `profile_image` *file, optional* |       |
| `banner_image` *file, optional*  |       |
| `bio` *int, optional*            |       |
| `website` *int, optional*        |       |
